/* content styles */
aside#alerts {
    margin-top: 20px;
}

.navbar {
    .servers, .btn.search {
        display: none;
    }

    // only show breadcrumbs in appropriate views
    .nav-section {
        display: none;

        body.section-databases   &.server,
        body.section-collections &.server,
        body.section-collections &.database,
        body.section-documents   &.server,
        body.section-documents   &.database,
        body.section-documents   &.collection,
        body.section-document    &.server,
        body.section-document    &.database,
        body.section-document    &.collection { display: block; }
    }

    // only show search form in doc views
    form {
        display: none;
        body.section-documents &,
        body.section-document & { display: block; }
    }

    // keep breadcrumb segments from leaking if they're too long
    .nav-section > a {
        html.textoverflow & {
            max-width: 8em;
            overflow: hidden;
            text-overflow: ellipsis;
        }
    }
}

body > section {
    min-height: 150px;

    section {
        display: none;
        background-color: white;
        margin:  20px 0;
        padding: 20px;
        border: 1px solid #AAA;
        .border-radius(4px);
        .box-shadow(~"0 1px 5px rgba(0,0,0,0.1), inset 0 1px 0 white");

        > header {
            .border-radius(4px 4px 0 0);
            margin: -20px -20px 20px;
            padding: 9px 20px;
            background-color: #f5f5f5;
            border-bottom: 1px solid #ddd;
            .box-shadow(inset 0 1px 0 @white);

            h2 {
                font-size:   24px;
                margin:      0;
                line-height: 30px;
            }
        }

        > .content {
            min-height: 100px;
            .transition(.1s linear all);
        }

        > p:first-child {
            margin-top: 0;
        }

        > p:last-child {
            margin-bottom: 0;
        }

        &.spinning > {
            height: 180px;
            header h2 {
                background: transparent url('data:image/gif;base64,R0lGODlhEAALAPQAAN7e3oiIiNHR0c3NzdbW1omJiYiIiJeXl7Ozs6enp8bGxpKSkqCgoLa2tqmpqcjIyJSUlIiIiKKiotXV1dDQ0Nra2pqamtLS0tnZ2cXFxb29vcvLy9jY2AAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCwAAACwAAAAAEAALAAAFLSAgjmRpnqSgCuLKAq5AEIM4zDVw03ve27ifDgfkEYe04kDIDC5zrtYKRa2WQgAh+QQJCwAAACwAAAAAEAALAAAFJGBhGAVgnqhpHIeRvsDawqns0qeN5+y967tYLyicBYE7EYkYAgAh+QQJCwAAACwAAAAAEAALAAAFNiAgjothLOOIJAkiGgxjpGKiKMkbz7SN6zIawJcDwIK9W/HISxGBzdHTuBNOmcJVCyoUlk7CEAAh+QQJCwAAACwAAAAAEAALAAAFNSAgjqQIRRFUAo3jNGIkSdHqPI8Tz3V55zuaDacDyIQ+YrBH+hWPzJFzOQQaeavWi7oqnVIhACH5BAkLAAAALAAAAAAQAAsAAAUyICCOZGme1rJY5kRRk7hI0mJSVUXJtF3iOl7tltsBZsNfUegjAY3I5sgFY55KqdX1GgIAIfkECQsAAAAsAAAAABAACwAABTcgII5kaZ4kcV2EqLJipmnZhWGXaOOitm2aXQ4g7P2Ct2ER4AMul00kj5g0Al8tADY2y6C+4FIIACH5BAkLAAAALAAAAAAQAAsAAAUvICCOZGme5ERRk6iy7qpyHCVStA3gNa/7txxwlwv2isSacYUc+l4tADQGQ1mvpBAAIfkECQsAAAAsAAAAABAACwAABS8gII5kaZ7kRFGTqLLuqnIcJVK0DeA1r/u3HHCXC/aKxJpxhRz6Xi0ANAZDWa+kEAA7AAAAAAAAAAAA') left center no-repeat;
                text-indent: -10000em;
            }
            .controls, .add-form, .content {
                display: none;
            }
        }

        .details {
            display: none;
        }
        .has-details {
            border-bottom: 1px dotted @greyish;
            cursor: default;
        }
    }
}

.add-form {
    button.show {
        display: none;
    }
    &.inactive {
        button, input, .input-append {
            display: none;
        }
        button.show {
            display: inherit;
        }
        .help {
            display: none;
        }
    }
    span.input-append {
        .add-on {
            margin-right: 4px;
        }
    }
    .help {
        cursor: default;
    }
}

#query-editor {
    width:    888px;
    height:   100px;
    position: relative;

    .transition(~"border linear 0.2s, box-shadow linear 0.2s");
    .box-shadow(inset 0 1px 3px rgba(0, 0, 0, 0.1));
    margin: 0 0 10px;
    padding: 4px;
    border: 1px solid #CCC;
    .border-radius(3px);
}

// All tables in Genghis are styled.
table {
    .table;
    .table-bordered;
    .table-hover;

    .header {
        cursor: pointer;
        &:after {
            content: "";
            float: right;
            margin-top: 7px;
            border-width: 0 4px 4px;
            border-style: solid;
            border-color: #000 transparent;
            visibility: hidden;
        }

        // Style the sorted column headers (THs)
        &.headerSortUp,
        &.headerSortDown {
            background-color: fadeout(@linkColor, 95%);
            text-shadow: 0 1px 1px rgba(255,255,255,.75);
        }
        // Style the ascending (reverse alphabetical) column header
        &:hover {
            &:after {
                visibility: visible;
            }
        }
        // Style the descending (alphabetical) column header
        &.headerSortDown,
        &.headerSortDown:hover {
            &:after {
                visibility:visible;
                .opacity(60);
            }
        }
        // Style the ascending (reverse alphabetical) column header
        &.headerSortUp {
            &:after {
                border-bottom: none;
                border-left: 4px solid transparent;
                border-right: 4px solid transparent;
                border-top: 4px solid #000;
                visibility:visible;
                .box-shadow(none); //can't add boxshadow to downward facing arrow :(
                .opacity(60);
            }
        }
    }
}

tr {
    td.action-column {
        padding: 7px 10px 0;
        text-align: right;
        button {
            visibility: hidden;
            -webkit-transition-property: color,background,box-shadow;
               -moz-transition-property: color,background,box-shadow;
                 -o-transition-property: color,background,box-shadow;
                    transition-property: color,background,box-shadow;
        }
    }
    &:hover {
        td.action-column button {
            visibility: inherit;
        }
    }
}

section#servers {
    .alert.alert-error {
        padding: 3px 10px;
        font-weight: bold;
    }

    tr.spinning {
        td:first-child {
            padding-left: 35px;
            background: transparent url('data:image/gif;base64,R0lGODlhEAALAPQAAP///zMzM+Hh4dnZ2e7u7jc3NzMzM1dXV5qamn9/f8fHx05OTm5ubqGhoYKCgsrKylFRUTY2NnFxcerq6t/f3/b29l9fX+Li4vT09MTExLKystTU1PHx8QAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCwAAACwAAAAAEAALAAAFLSAgjmRpnqSgCuLKAq5AEIM4zDVw03ve27ifDgfkEYe04kDIDC5zrtYKRa2WQgAh+QQJCwAAACwAAAAAEAALAAAFJGBhGAVgnqhpHIeRvsDawqns0qeN5+y967tYLyicBYE7EYkYAgAh+QQJCwAAACwAAAAAEAALAAAFNiAgjothLOOIJAkiGgxjpGKiKMkbz7SN6zIawJcDwIK9W/HISxGBzdHTuBNOmcJVCyoUlk7CEAAh+QQJCwAAACwAAAAAEAALAAAFNSAgjqQIRRFUAo3jNGIkSdHqPI8Tz3V55zuaDacDyIQ+YrBH+hWPzJFzOQQaeavWi7oqnVIhACH5BAkLAAAALAAAAAAQAAsAAAUyICCOZGme1rJY5kRRk7hI0mJSVUXJtF3iOl7tltsBZsNfUegjAY3I5sgFY55KqdX1GgIAIfkECQsAAAAsAAAAABAACwAABTcgII5kaZ4kcV2EqLJipmnZhWGXaOOitm2aXQ4g7P2Ct2ER4AMul00kj5g0Al8tADY2y6C+4FIIACH5BAkLAAAALAAAAAAQAAsAAAUvICCOZGme5ERRk6iy7qpyHCVStA3gNa/7txxwlwv2isSacYUc+l4tADQGQ1mvpBAAIfkECQsAAAAsAAAAABAACwAABS8gII5kaZ7kRFGTqLLuqnIcJVK0DeA1r/u3HHCXC/aKxJpxhRz6Xi0ANAZDWa+kEAA7AAAAAAAAAAAA') 10px center no-repeat;
        }
    }

    tr {
        input {
            display: none;
        }
        &.editing {
            span.name {
                display: none;
            }
            input {
                display: inherit;
            }
        }
    }
}

.index-details {
    color: @blackish;
    list-style: none;
    margin: 0;

    > li {
        display: block;
        margin-bottom: 5px;
        ul, li {
            display: inline-block;
            list-style: none;
            margin:     0;
            padding:    0;
        }

        li {
            color:    @blackish;
            &:after {
                content: ',';
                padding-right: .25em;
            }
            &:last-of-type:after {
                content: '';
                padding-right: 0;
            }
        }

        .prop:after {
            content: ':';
            color:   @greyish;
            padding-right: .25em;
        }

        .num {
            color: #40A070;
        }
    }
}

.document-wrapper {
    div.well {
        overflow-x: auto;

        h3 {
            margin-top: 0;
            a {
                color: @grayDark;
                &:hover, &:active {
                    color: @linkColor;
                }
            }
        }
    }

    article {
        position: relative;
        div.document-actions {
            position: absolute;
            right: 20px;
            z-index: 10;
            button.save, button.cancel {
                display: none;
            }
            button.edit, button.destroy {
                visibility: hidden;
            }
        }
        &:hover {
            div.document-actions {
                button.edit, button.destroy {
                    visibility: inherit;
                }
            }
        }
        div.well {
            .transition(~"border linear .2s, box-shadow linear .2s");
            .box-shadow(inset 0 1px 1px rgba(0,0,0,.05));
        }
        &.edit {
            div.document-actions {
                margin-top: 20px;
                button.edit, button.destroy {
                    display: none;
                }
                button.save, button.cancel {
                    display: inline-block;
                }
            }
            div.well {
                h3 {
                    display: none;
                }
                padding: 0;
                height: 400px;
                background-color: white;
                .clearfix;
                .CodeMirror-scroll {
                    // CodeMirror should auto-adjust height inside a document view.
                    height: auto;
                    overflow: visible;
                }
            }
            &.focused {
                div.well {
                    border-color:     fade(@linkColor, 80%);
                    @formFocusShadow: fade(@linkColor, 60%);
                    .box-shadow(~"inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px @{formFocusShadow}");
                }
            }
        }
    }
}

section#documents {
    .controls {
        .clearfix;
        margin-bottom: 20px;
        .add-document {
            float: left;
        }
        .pagination {
            margin: 0;
            li.prev a:after {
                content: ' Previous';
            }
            li.next a:before {
                content: 'Next ';
            }
        }
    }
}

section#document {
    article h3 { display: none; }
}

.modal.editor {
    width:       820px;
    margin-left: -410px;
    max-height: 90%;
    .wrapper {
        .border-radius(4px);
        border: 1px solid @inputBorder;
        &.focused {
            border: 1px solid fade(@linkColor, 80%);
            @formFocusShadow: fade(@linkColor, 60%);
            .box-shadow(~"0 0 8px @{formFocusShadow}");
        }
    }
    .CodeMirror-scroll {
        height: 250px;
    }
}

#keyboard-shortcuts {
    .modal-body {
        ul {
            .clearfix;
            list-style: none;
            margin: 0;
            padding: 0;
            li {
                width: 50%;
                float: left;
                list-style: none;
                margin: 0;
                padding: 0;
            }
        }
        h4 {
            font-size: 1em;
            line-height: 2;
        }
        dl {
            dt, dd {
                line-height: 1.5;
            }
            dt {
                margin: 0;
                padding: 0;
                float: left;
                width: 2em;
            }
            dd {
                margin: 0 0 0 3em;
            }
        }
    }
}

// Look! responsiveish!
@media screen and (max-width: 1200px) {
    section#documents {
        .controls .pagination {
            li.next a:before {
                content: 'Next ';
            }
            li.prev a:after {
                content: ' Prev';
            }
        }
    }
}

@media screen and (max-width: 860px) {
    .modal.editor {
        left:  20px;
        right: 20px;
        width: auto;
        margin-left: 0;
    }
    table {
        .table-condensed;
        td.action-column {
            padding-top: 2px;
        }
    }
    section#documents {
        .controls .pagination {
            li.prev a:after, li.next a:before {
                content: '';
            }
        }
    }

    #keyboard-shortcuts {
        width: 440px;
        margin-left: -220px;
    }
}

@media only screen and (max-width: 480px) {
    .container {
        padding: 0;
    }

    // navvvv
    .navbar {
        .nav {
            float: none;
        }

        .btn.search {
            display: inline-block;
            z-index: 10;
        }
        form {
            display: none; // deal with this guy later
            height: 0;
            overflow: hidden;
        }

        .brand {
            display: none;
            body.section-servers & {
                display: block;
                text-align: center;
                float: none;
            }
        }

        .nav-section {
            position: absolute;
            background: none;

            .dropdown-menu {
                display: none;
            }

            body.section-servers &.servers,
            body.section-servers &.server,
            body.section-servers &.database,
            body.section-servers &.collection,
            body.section-databases &.database,
            body.section-databases &.collection,
            body.section-collections &.servers,
            body.section-collections &.collection,
            body.section-documents &.servers,
            body.section-documents &.server,
            body.section-document &.servers,
            body.section-document &.server {
                display: none;
            }

            // "previous" button
            body.section-databases &.servers,
            body.section-collections &.server,
            body.section-documents &.database,
            body.section-document &.database {
                display: inline-block;
                float: left;
                padding: 16px 0 0 2px;
                z-index: @zindexFixedNavbar + 2;
                > a.dropdown-toggle, > a {
                    .btn;
                    .back-button;
                    .transition(none);
                    z-index: 10;
                    overflow: visible;
                }
                &.dropdown .dropdown-toggle {
                    padding: 4px 14px;
                }
            }

            // "current" section heading
            body.section-databases &.server,
            body.section-collections &.database,
            body.section-documents &.collection,
            body.section-document &.collection {
                width: 12em;
                left:  50%;
                margin-left: -6em;
                padding-top: 20px;
                display: inline-block;
                float: none;
                text-align: center;
                z-index: @zindexFixedNavbar + 1;
                > a {
                    font-family: "Rokkitt", serif;
                    font-size:   24px;
                    line-height: 24px;
                }
                .dropdown-toggle {
                    padding: 0;
                }
            }
        }
    }

    body > section section {
        border: none;
        .border-radius(0);
    }

    /* Force table to not be like tables anymore */
    table, thead, tbody, th, td, tr {
        display: block;
    }

    table {
        border: none;

        /* Hide table headers (but not display: none;, for accessibility) */
        thead tr {
            position: absolute;
            top: -9999px;
            left: -9999px;
        }

        tr {
            border: 1px solid #DDD;
            border-bottom: none;
            &:last-child {
                border-bottom: 1px solid #DDD;
            }
            &:first-child, &:first-child > td:first-child {
                .border-top-left-radius(5px);
                .border-top-right-radius(5px);
            }
            &:last-child, &:last-child > td:last-child {
                .border-bottom-left-radius(5px);
                .border-bottom-right-radius(5px);
            }
        }

        td {
            /* Behave  like a "row" */
            border: none;
            position: relative;
            padding-left: 35%;
        }

        td:before {
            /* Now like a table header */
            position: absolute;
            /* Top/left values mimic padding */
            top: 6px;
            left: 6px;
            width: 30%;
            padding-right: 10px;
            white-space: nowrap;
            font-weight: bold;
        }

    }

    #keyboard-shortcuts {
        width: 360px;
        margin-left: -180px;
    }


    /* Label the data */
    section#servers {
        table {
            td:nth-of-type(1):before { content: "name"; }
            td:nth-of-type(2):before { content: "databases"; }
            td:nth-of-type(3):before { content: "size"; }
            td:nth-of-type(4), td.action-column { display: none; }
        }
    }

    section#databases {
        table {
            td:nth-of-type(1):before { content: "name"; }
            td:nth-of-type(2):before { content: "collections"; }
            td:nth-of-type(3):before { content: "size"; }
            td:nth-of-type(4), td.action-column { display: none; }
        }
    }

    section#collections {
        table {
            td:nth-of-type(1):before { content: "name"; }
            td:nth-of-type(2):before { content: "documents"; }
            td:nth-of-type(3):before { content: "indexes"; }
            td:nth-of-type(4), td.action-column { display: none; }
        }
    }
}
